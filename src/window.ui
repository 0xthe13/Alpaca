<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk" version="4.0"/>
  <requires lib="Adw" version="1.0"/>
  <template class="AlpacaWindow" parent="AdwApplicationWindow">
    <property name="resizable">True</property>
    <property name="content">
      <object class="AdwToastOverlay" id="main_overlay">
        <child>
          <object class="AdwToolbarView">
            <child type="top">
              <object class="AdwHeaderBar" id="header_bar">
                <property name="title-widget">
                  <object class="GtkBox">
                    <property name="orientation">0</property>
                    <property name="spacing">12</property>
                    <child>
                      <object class="GtkDropDown" id="model_drop_down">
                        <property name="enable-search">true</property>
                        <property name="model">
                          <object class="GtkStringList" id="model_string_list">
                            <items>
                            </items>
                          </object>
                        </property>
                      </object>
                    </child>
                    <child>
                      <object class="GtkButton" id="manage_models_button">
                        <property name="tooltip-text" translatable="yes">Manage models</property>
                        <child>
                          <object class="AdwButtonContent">
                            <property name="icon-name">package-x-generic-symbolic</property>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </property>
                <child type="end">
                  <object class="GtkMenuButton">
                    <property name="primary">True</property>
                    <property name="icon-name">open-menu-symbolic</property>
                    <property name="tooltip-text" translatable="yes">Menu</property>
                    <property name="menu-model">primary_menu</property>
                  </object>
                </child>
              </object>
            </child>
            <property name="content">
              <object class="GtkBox"><!--ACTUAL CONTENT-->

                <property name="orientation">1</property>
                <property name="margin-start">24</property>
                <property name="margin-end">24</property>
                <property name="margin-bottom">24</property>
                <property name="vexpand">true</property>
                <property name="hexpand">true</property>

                <child>
                  <object class="GtkScrolledWindow" id="chat_window">
                    <property name="margin-bottom">12</property>
                    <property name="has-frame">true</property>
                    <property name="propagate-natural-height">true</property>
                    <property name="min-content-width">500</property>
                    <property name="min-content-height">600</property>
                    <property name="kinetic-scrolling">1</property>
                    <property name="vexpand">true</property>
                    <style>
                      <class name="card"/>
                    </style>
                    <child>
                      <object class="GtkBox" id="chat_container">
                        <property name="orientation">1</property>
                        <property name="homogeneous">false</property>
                        <property name="hexpand">false</property>
                        <property name="vexpand">true</property>
                        <property name="spacing">12</property>
                        <property name="margin-top">12</property>
                        <property name="margin-bottom">12</property>
                        <property name="margin-start">12</property>
                        <property name="margin-end">12</property>
                      </object>
                    </child>
                  </object>
                </child>

                <child>
                  <object class="GtkBox">
                    <property name="orientation">0</property>
                    <property name="spacing">12</property>
                    <child>
                      <object class="GtkScrolledWindow">
                        <style>
                          <class name="card"/>
                          <class name="view"/>
                        </style>
                        <child>
                          <object class="GtkTextView" id="message_text_view">
                            <property name="wrap-mode">word</property>
                            <property name="margin-top">6</property>
                            <property name="margin-bottom">6</property>
                            <property name="margin-start">6</property>
                            <property name="margin-end">6</property>
                            <property name="hexpand">true</property>
                            <style>
                              <class name="view"/>
                            </style>
                          </object>
                        </child>
                      </object>

                    </child>
                    <child>
                      <object class="GtkBox">
                        <property name="orientation">1</property>
                        <property name="spacing">12</property>
                        <child>
                          <object class="GtkButton" id="send_button">
                            <style>
                              <class name="suggested-action"/>
                            </style>
                            <child>
                              <object class="AdwButtonContent">
                                <property name="label" translatable="true">Send</property>
                                <property name="icon-name">send-to-symbolic</property>
                              </object>
                            </child>
                          </object>
                        </child>
                        <child>
                          <object class="GtkButton" id="image_button">
                            <property name="sensitive">false</property>
                            <property name="tooltip-text" translatable="true">Requires model 'llava' to be selected</property>
                            <child>
                              <object class="AdwButtonContent">
                                <property name="label" translatable="true">Image</property>
                                <property name="icon-name">image-x-generic-symbolic</property>
                              </object>
                            </child>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </child>

              </object><!--END OF CONTENT-->
            </property>
          </object>
        </child>
      </object>
    </property>

    <object class="AdwDialog" id="pull_model_dialog">
      <property name="can-close">false</property>
      <property name="width-request">400</property>
      <child>
        <object class="AdwToastOverlay" id="pull_overlay">
          <child>
            <object class="AdwToolbarView">
              <child>
                <object class="AdwStatusPage" id="pull_model_status_page">
                  <property name="hexpand">true</property>
                  <property name="vexpand">true</property>
                  <property name="margin-top">24</property>
                  <property name="margin-bottom">24</property>
                  <property name="margin-start">24</property>
                  <property name="margin-end">24</property>
                  <property name="title" translatable="yes">Pulling Model</property>
                  <child>
                    <object class="GtkProgressBar" id="pull_model_progress_bar">
                      <property name="show-text">true</property>
                    </object>
                  </child>
                </object>
              </child>
            </object>
          </child>
        </object>
      </child>
    </object>

    <object class="AdwDialog" id="manage_models_dialog">
      <property name="can-close">true</property>
      <property name="width-request">400</property>
      <property name="height-request">600</property>
      <child>
        <object class="AdwToastOverlay" id="manage_models_overlay">
          <child>
            <object class="AdwToolbarView">
              <child type="top">
                <object class="AdwHeaderBar">
                  <property name="title-widget">
                    <object class="AdwWindowTitle">
                      <property name="title">Manage models</property>
                    </object>
                  </property>
                </object>
              </child>
              <child>
                <object class="GtkBox">
                  <property name="hexpand">true</property>
                  <property name="vexpand">true</property>
                  <property name="margin-top">0</property>
                  <property name="margin-bottom">24</property>
                  <property name="margin-start">24</property>
                  <property name="margin-end">24</property>
                  <child>
                    <object class="GtkScrolledWindow">
                      <property name="hexpand">true</property>
                      <property name="vexpand">true</property>
                      <child>
                        <object class="GtkListBox" id="model_list_box">
                          <property name="selection-mode">none</property>
                          <style>
                            <class name="boxed-list"/>
                          </style>
                        </object>
                      </child>
                    </object>
                  </child>
                </object>
              </child>
            </object>
          </child>
        </object>
      </child>
    </object>

    <object class="AdwDialog" id="connection_dialog">
      <property name="can-close">false</property>
      <property name="width-request">450</property>
      <property name="height-request">450</property>
      <child>
        <object class="AdwToastOverlay" id="connection_overlay">
          <child>
            <object class="AdwToolbarView">
              <child type="top">
                <object class="AdwHeaderBar">
                </object>
              </child>
              <child type="bottom">
                <object class="GtkActionBar">
                  <property name="hexpand">true</property>
                  <property name="margin-start">5</property>
                  <property name="margin-end">5</property>
                  <property name="margin-bottom">5</property>
                  <child type="start">
                    <object class="GtkButton" id="connection_previous_button">
                      <property name="tooltip-text" translatable="yes">Previous</property>
                      <property name="label">Previous</property>
                      <property name="sensitive">false</property>
                      <style>
                        <class name="raised"/>
                      </style>
                    </object>
                  </child>
                  <child type="center">
                    <object class="AdwCarouselIndicatorDots">
                      <property name="carousel">connection_carousel</property>
                    </object>
                  </child>
                  <child type="end">
                    <object class="GtkButton" id="connection_next_button">
                      <property name="tooltip-text" translatable="yes">Next</property>
                      <property name="label">Next</property>
                      <style>
                        <class name="suggested-action"/>
                      </style>
                    </object>
                  </child>
                </object>
              </child>

              <child>
                <object class="AdwCarousel" id="connection_carousel">
                  <property name="hexpand">true</property>
                  <property name="vexpand">true</property>
                  <property name="allow-long-swipes">true</property>
                  <property name="allow-scroll-wheel">true</property>
                  <property name="spacing">12</property>
                  <child>
                    <object class="AdwStatusPage">
                      <property name="hexpand">true</property>
                      <property name="vexpand">true</property>
                      <property name="margin-top">12</property>
                      <property name="margin-bottom">12</property>
                      <property name="margin-start">12</property>
                      <property name="margin-end">12</property>
                      <property name="icon-name">com.jeffser.Alpaca</property>
                      <property name="title" translatable="yes">Welcome to Alpaca</property>
                      <property name="description" translatable="yes">To get started, please ensure you have an Ollama instance set up. You can either run Ollama locally on your machine or connect to a remote instance.</property>
                      <child>
                        <object class="GtkLinkButton">
                          <property name="label" translatable="true">Ollama Website</property>
                          <property name="uri">https://ollama.com/</property>
                          <property name="margin-top">12</property>
                        </object>
                      </child>
                    </object>
                  </child>
                  <child>
                    <object class="AdwStatusPage">
                      <property name="hexpand">true</property>
                      <property name="vexpand">true</property>
                      <property name="margin-top">12</property>
                      <property name="margin-bottom">12</property>
                      <property name="margin-start">12</property>
                      <property name="margin-end">12</property>
                      <property name="icon-name">dialog-warning-symbolic</property>
                      <property name="title" translatable="yes">Disclaimer</property>
                      <property name="description" translatable="yes">Alpaca and its developers are not liable for any damages to devices or software resulting from the execution of code generated by an AI model. Please exercise caution and review the code carefully before running it.</property>
                    </object>
                  </child>
                  <child>
                    <object class="AdwStatusPage">
                      <property name="hexpand">true</property>
                      <property name="vexpand">true</property>
                      <property name="margin-top">12</property>
                      <property name="margin-bottom">12</property>
                      <property name="margin-start">12</property>
                      <property name="margin-end">12</property>
                      <property name="icon-name">preferences-other-symbolic</property>
                      <property name="title" translatable="yes">Setup</property>
                      <property name="description" translatable="yes">If you are running an Ollama instance locally and haven't modified the default ports, you can use the default URL. Otherwise, please enter the URL of your Ollama instance.</property>
                      <child>
                        <object class="GtkEntry" id="connection_url_entry">
                          <property name="text">http://localhost:11434</property>
                        </object>
                      </child>
                    </object>
                  </child>
                </object>
              </child>
            </object>
          </child>
        </object>
      </child>
    </object>

  </template>
  <menu id="primary_menu">
    <section>
      <item>
        <attribute name="label" translatable="yes">_Clear Conversation</attribute>
        <attribute name="action">app.clear</attribute>
      </item>
      <item>
        <attribute name="label" translatable="yes">_Change Server</attribute>
        <attribute name="action">app.reconnect</attribute>
      </item>
      <item>
        <attribute name="label" translatable="yes">_About Alpaca</attribute>
        <attribute name="action">app.about</attribute>
      </item>
    </section>
  </menu>

  <object class="GtkFileFilter" id="file_filter_image">
    <mime-types>
      <mime-type>image/svg+xml</mime-type>
      <mime-type>image/png</mime-type>
      <mime-type>image/jpeg</mime-type>
      <mime-type>image/webp</mime-type>
      <mime-type>image/gif</mime-type>
    </mime-types>
  </object>
</interface>
